import os
import sys
import json

events_json = """
[{"content":{"creator":"@simulator080402:nl.circles-dev.net","room_version":"7","type":"m.space"},"origin_server_ts":1691186432751,"room_id":"!DUuyVcmPSWdmfhJwyR:nl.circles-dev.net","sender":"@simulator080402:nl.circles-dev.net","state_key":"","type":"m.room.create","unsigned":{"age":163976},"event_id":"$giqmuFrXZGZ06wjg7MqxZi1IqKCvaanpZf7XA9OBkX8","user_id":"@simulator080402:nl.circles-dev.net","age":163976},{"content":{"algorithm":"m.megolm.v1.aes-sha2"},"origin_server_ts":1691186432997,"room_id":"!DUuyVcmPSWdmfhJwyR:nl.circles-dev.net","sender":"@simulator080402:nl.circles-dev.net","state_key":"","type":"m.room.encryption","unsigned":{"age":163730},"event_id":"$pOgRFDekOtFpb96kr0clH1qxZsR9pfJZTObNS--g31M","user_id":"@simulator080402:nl.circles-dev.net","age":163730},{"content":{"guest_access":"can_join"},"origin_server_ts":1691186432996,"room_id":"!DUuyVcmPSWdmfhJwyR:nl.circles-dev.net","sender":"@simulator080402:nl.circles-dev.net","state_key":"","type":"m.room.guest_access","unsigned":{"age":163731},"event_id":"$Aaf3iHToyb1e4MSM4-Bgh-oSABLb0a8effvwqFFeqvw","user_id":"@simulator080402:nl.circles-dev.net","age":163731},{"content":{"history_visibility":"shared"},"origin_server_ts":1691186432995,"room_id":"!DUuyVcmPSWdmfhJwyR:nl.circles-dev.net","sender":"@simulator080402:nl.circles-dev.net","state_key":"","type":"m.room.history_visibility","unsigned":{"age":163732},"event_id":"$FGYBb_kWz5K_K348j4wPwQ4W_7Bi177ZcHaZMsrXUsk","user_id":"@simulator080402:nl.circles-dev.net","age":163732},{"content":{"join_rule":"invite"},"origin_server_ts":1691186432994,"room_id":"!DUuyVcmPSWdmfhJwyR:nl.circles-dev.net","sender":"@simulator080402:nl.circles-dev.net","state_key":"","type":"m.room.join_rules","unsigned":{"age":163733},"event_id":"$gwTeThCyt-EuOFQdSVnZH0Bjj0oa1rOVfjwa2fAqftU","user_id":"@simulator080402:nl.circles-dev.net","age":163733},{"content":{"name":"My Groups"},"origin_server_ts":1691186432998,"room_id":"!DUuyVcmPSWdmfhJwyR:nl.circles-dev.net","sender":"@simulator080402:nl.circles-dev.net","state_key":"","type":"m.room.name","unsigned":{"age":163729},"event_id":"$9aTJO3ncVKU2aeaI_DaOae2p0eweitbfKzsKh-BUO30","user_id":"@simulator080402:nl.circles-dev.net","age":163729},{"content":{"ban":50,"events":{"m.room.avatar":50,"m.room.canonical_alias":50,"m.room.encryption":100,"m.room.history_visibility":100,"m.room.name":50,"m.room.power_levels":100,"m.room.server_acl":100,"m.room.tombstone":100},"events_default":0,"historical":100,"invite":0,"kick":50,"redact":50,"state_default":50,"users":{"@simulator080402:nl.circles-dev.net":100},"users_default":0},"origin_server_ts":1691186432981,"room_id":"!DUuyVcmPSWdmfhJwyR:nl.circles-dev.net","sender":"@simulator080402:nl.circles-dev.net","state_key":"","type":"m.room.power_levels","unsigned":{"age":163746},"event_id":"$wE70UgXQhe9LHJXS9svrC512kM_uxDjf-ZZOerh_vRc","user_id":"@simulator080402:nl.circles-dev.net","age":163746},{"content":{"avatar_url":"mxc://nl.circles-dev.net/mkhUfABxmfPdeEtVONyqhzaz","displayname":"Simulator 080402","membership":"join"},"origin_server_ts":1691186432883,"room_id":"!DUuyVcmPSWdmfhJwyR:nl.circles-dev.net","sender":"@simulator080402:nl.circles-dev.net","state_key":"@simulator080402:nl.circles-dev.net","type":"m.room.member","unsigned":{"age":163844},"event_id":"$9desVU1C7QjqBY4x_4F47LdGDaj2x_FHoH4P6azwXvA","user_id":"@simulator080402:nl.circles-dev.net","age":163844}]
"""


sync_response = """
{"next_batch":"s17801_1_0_344_3569_11_1326_2049_0_3","device_lists":{"changed":["@ixr080901:circu.li"]},"device_one_time_keys_count":{"signed_curve25519":50},"org.matrix.msc2732.device_unused_fallback_key_types":["signed_curve25519"],"device_unused_fallback_key_types":["signed_curve25519"],"rooms":{"join":{"!utgvjNDYSqGTTFeHki:circu.li":{"timeline":{"events":[{"content":{"m.relates_to":{"event_id":"$s4ATlcYjEPlqG772qf4h4ilGdGQ0BBJ8f05SaUCFkFw","key":"\ud83e\udd14","rel_type":"m.annotation"}},"origin_server_ts":1691619429151,"sender":"@droid080803:circu.li","type":"m.reaction","unsigned":{"age":12563539},"event_id":"$j5PoI51neDVEqJkoVUjVz8MnAtcUdG-1Lhq0P3wFDXs"},{"content":{"algorithm":"m.megolm.v1.aes-sha2","ciphertext":"AwgCEuABV2WO1h+/9CADfC6EyLtahT6SpFAUA0PG7M1B0jT21MvHpPgjg7GBuI4fCelN4WnHF3rHKtvibWIOmq/ykbXwjvJ8S4p9Ogp2Del879A1tEe+r0BN6qvkS0RMrTdLNXA2mNoaW2JnceCawkfrwVTFCPV5QCJBDV8hshsTnMuH6aBguXBUgzBycQD5Gnma2xBYHb3/til7dawupr3KxfqBy3bYmPQXm65HjCC4bebrFdL/3sGS5s7w02qvBVO33APVESdYz7ETzVu8tWSc+x4Dv2aLStBKdeROdhyfxlx5WFBcJ471mRXdrjCaK0w7dHc2p0/WKQ2eAwlntfY4KFLCy5TP6vLVa8OU4njWddCi2n/IEL9LxQBPLlSPc3JtzLe7Q9KhL9ISQAk","device_id":"LDHAXYUYHN","m.relates_to":{"event_id":"$s4ATlcYjEPlqG772qf4h4ilGdGQ0BBJ8f05SaUCFkFw","rel_type":"m.thread"},"sender_key":"vEmUq7E7a5vWMoqHjnMezRXjOGC/w0vJBm2zMX13yTY","session_id":"DYGvjsVKgbAfFgfyd4Y2kC/VpgCyJHijwrxLATZ8UDQ"},"origin_server_ts":1691619547589,"sender":"@ixr080901:circu.li","type":"m.room.encrypted","unsigned":{"age":12445101,"transaction_id":"4072"},"event_id":"$EYl7UREY3fUyVOWb_E2DW-Cgu_7QsqBqs7B1XRnEKqE"},{"content":{"algorithm":"m.megolm.v1.aes-sha2","ciphertext":"AwgBErAFQIPNR+8ftPqBFRhn6S7etYSvP72QbUVq2ZV3h1ZIkEdLQoTrJ3oa8h0b1LcMYGeRu0Fjq3OeLvBL0k9ORDbwPdtcRwvX4ItIuZ8RT3m/hRf6XrG/Znuviw/3Cqg9A1q1n3wbPRjSsMFa5ea14rO+W9QvCBxczdUYC6jdI4VXvhzTPnlFJcNlyHWkEi1/7viEAASuJLm2ThljWjV7KpeuEkRMtfe6iTHVyNqsFfFhYDE8yKiRCIosu/3e4hfWdOsJzRFfgHBH0EFNrlslceEt5CSrqOVY4USTXoJ1W46u2oP6UfNzThOHbv+p9ndeTtqy8R443Y2eirZSLNHrNBzKVG6YjgSP69iyYj4QnhEbHNBgGh1pAKif2t39G0ZZH/kxNG1UcZmwhwhaEvjEyi5dLvktv6uglQTyKPryd9TZ0kYbC2a8BC9WARm1wHfIFvo0kDYLgue5oVuUUrO3u1Ro6fqAGeEIYGHzy4km/g1PsI6dQIhIgTbzSXcHlxBkdtYfX29sb3Pez3j5/XmyUWNTPolGq5Jkz/CplXb4a56MtfWcU0ufI8eKaO7U1wCTbE+fCDZNz3eFMnBgSOBsgNKBloujNcHn/iOF8aiq7hfsEb0rO/wYQgWn09FiqL+hREmF/oqXhO9JdzMb8laOOcXWchKXPIMakVRUOeTL2ZsG0TICVVlcLLC4NOrnKIbdCtyWX0a4cQ8IYoyhpQGrmNocEG1NzbUydme51ngB1q3ACjt0+XhvFcIJ6eGS52qzSeHmJzWlRF3MJsBca0cOq3/9Ri3STS6zO8pacKPDRgaMgb7aGe3OtFf2Em6x6zZLsv/755xsIDdT244ZRtxBTJckaLAJar+Y1+J91zO8stMIzxeAdsyGoV0pkdVYEFGvcPsXm5HHWMU1mvsmDSUZaZPYysGYJYcdI6KXcLsEH1yMd5glnt9ChW/qC6bJ9sLoJLSsCumENGl8J65Adf9Yu5tbPq6OlHvwtMBtH9JjhhE1vV88gkZwArGYDQ","device_id":"FNESBYKILF","m.relates_to":{"event_id":"$s4ATlcYjEPlqG772qf4h4ilGdGQ0BBJ8f05SaUCFkFw","is_falling_back":true,"m.in_reply_to":{"event_id":"$s4ATlcYjEPlqG772qf4h4ilGdGQ0BBJ8f05SaUCFkFw"},"rel_type":"m.thread"},"sender_key":"wnvFgeuc1kBbR80IqxDhK0hoVY8pCxWulAWg+7GsVjA","session_id":"b5MHN1zadjpaLw735ZnU/uhuAr+pRwyRq5iXdQTKgGk"},"origin_server_ts":1691619575241,"sender":"@droid080803:circu.li","type":"m.room.encrypted","unsigned":{"age":12417449},"event_id":"$tyvTfJvVu2xjM_FfWrleHqQup7JfolDyLAZAMRumdBs"}],"prev_batch":"s17788_1_0_344_3569_11_1326_2049_0_3","limited":false},"state":{"events":[]},"account_data":{"events":[]},"ephemeral":{"events":[{"type":"m.receipt","content":{"$s4ATlcYjEPlqG772qf4h4ilGdGQ0BBJ8f05SaUCFkFw":{"m.read":{"@droid080803:circu.li":{"ts":1691619411560,"thread_id":"main"}}}}}]},"unread_notifications":{"notification_count":2,"highlight_count":0},"summary":{}},"!HvHnSnHNBRFCFSYXPc:circu.li":{"timeline":{"events":[{"content":{"order":"111","via":["circu.li"]},"origin_server_ts":1691619683650,"sender":"@ixr080901:circu.li","state_key":"!uIulEgeYFxfIuRPJGR:circu.li","type":"m.space.child","unsigned":{"age":12309040},"event_id":"$X70jEFlooEhbmT0Cpii2_OtcTAZS2BZ9dSpL3226Fw8"}],"prev_batch":"s17799_1_0_344_3569_11_1326_2049_0_3","limited":false},"state":{"events":[]},"account_data":{"events":[]},"ephemeral":{"events":[]},"unread_notifications":{"notification_count":0,"highlight_count":0},"summary":{}},"!uIulEgeYFxfIuRPJGR:circu.li":{"timeline":{"events":[{"content":{"creator":"@ixr080901:circu.li","room_version":"7","type":"org.futo.social.group"},"origin_server_ts":1691619683160,"sender":"@ixr080901:circu.li","state_key":"","type":"m.room.create","unsigned":{"age":12309530},"event_id":"$qS6_fOMNP7dRuYz5XzoLUZZb1fWksjjrKH_LAhywovQ"},{"content":{"creator":"@ixr080901:circu.li","room_version":"7","type":"org.futo.social.group"},"origin_server_ts":1691619683160,"sender":"@ixr080901:circu.li","state_key":"","type":"m.room.create","unsigned":{"age":12309530},"event_id":"$qS6_fOMNP7dRuYz5XzoLUZZb1fWksjjrKH_LAhywovQ"},{"content":{"avatar_url":"mxc://circu.li/iVoXOSbpXLgyKMhfOwEDAewC","displayname":"iPhone XR 08091","membership":"join"},"origin_server_ts":1691619683244,"sender":"@ixr080901:circu.li","state_key":"@ixr080901:circu.li","type":"m.room.member","unsigned":{"age":12309446},"event_id":"$IjtV5zy-ynR5-yaVmliw8nL1q0yLmK2zK9o649dnj-4"},{"content":{"ban":50,"events":{"m.room.avatar":50,"m.room.canonical_alias":50,"m.room.encryption":100,"m.room.history_visibility":100,"m.room.name":50,"m.room.power_levels":100,"m.room.server_acl":100,"m.room.tombstone":100},"events_default":0,"historical":100,"invite":0,"kick":50,"redact":50,"state_default":50,"users":{"@ixr080901:circu.li":100},"users_default":0},"origin_server_ts":1691619683312,"sender":"@ixr080901:circu.li","state_key":"","type":"m.room.power_levels","unsigned":{"age":12309378},"event_id":"$RmsIT1d_mOoew9l1CCj7khU7IR0ja5_Xxj3qebiYhxs"},{"content":{"join_rule":"invite"},"origin_server_ts":1691619683322,"sender":"@ixr080901:circu.li","state_key":"","type":"m.room.join_rules","unsigned":{"age":12309368},"event_id":"$-Qw9dWGMHn4I22jQHzyuaY1RqoFatdYos2J1KYwdXEI"},{"content":{"history_visibility":"shared"},"origin_server_ts":1691619683323,"sender":"@ixr080901:circu.li","state_key":"","type":"m.room.history_visibility","unsigned":{"age":12309367},"event_id":"$HffZ7W6AWr3wIl2Bi9h7Rh869tkg_UrwXxGmEnFFC-g"},{"content":{"guest_access":"can_join"},"origin_server_ts":1691619683323,"sender":"@ixr080901:circu.li","state_key":"","type":"m.room.guest_access","unsigned":{"age":12309367},"event_id":"$wQLJM-byr7ergTqAaFBNpa6e27Y9y_SjxiULvK17puE"},{"content":{"algorithm":"m.megolm.v1.aes-sha2","rotation_period_ms":604800000,"rotation_period_msgs":100},"origin_server_ts":1691619683323,"sender":"@ixr080901:circu.li","state_key":"","type":"m.room.encryption","unsigned":{"age":12309367},"event_id":"$PtBJTl0RTiWn5Vv2qHQ1fsTnxMDpmmDswpeQ1djRBr4"},{"content":{"name":"Android Test 2"},"origin_server_ts":1691619683324,"sender":"@ixr080901:circu.li","state_key":"","type":"m.room.name","unsigned":{"age":12309366},"event_id":"$yIRzQt5T-mhZsi6RIdWta5cOz0xsqNc5P7DDId6drOc"},{"content":{"info":{"h":267,"mimetype":"image/jpeg","size":327465,"w":400},"url":"mxc://circu.li/mtrXxHdzZeIynHActnePkiMB"},"origin_server_ts":1691619684375,"sender":"@ixr080901:circu.li","state_key":"","type":"m.room.avatar","unsigned":{"age":12308315},"event_id":"$2A1L-Wax9D6pb8bPRuxX9NDOyLuswhIEho9t0kv99u4"}],"prev_batch":"s17792_1_0_344_3569_11_1326_2049_0_3","limited":true},"state":{"events":[]},"account_data":{"events":[]},"ephemeral":{"events":[]},"unread_notifications":{"notification_count":0,"highlight_count":0},"summary":{}}}}}
"""

#stuff = json.loads(events_json)
#stuff = json.loads(sync_response)
#pretty = json.dumps(stuff, indent=4)
#print(pretty)


filename = sys.argv[1]
print("Reading from file %s" % filename)
with open(filename) as f:
    data = f.read()
    print("Read data = ", data)
    stuff = json.loads(data)
    pretty = json.dumps(stuff, indent=4)
    print(pretty)
